# üìö Smart Learning Hub (Google Classroom-like LMS)

---

## üáπüá≠ ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)
- [‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå](#‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå)
- [‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ (Tech Stack)](#‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ-tech-stack)
- [‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÇ‡∏î‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î](#‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÇ‡∏î‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)
- [‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡πâ‡∏î Backend](#‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡πâ‡∏î-backend)
- [‡∏£‡∏∞‡∏ö‡∏ö SPA ‡πÅ‡∏•‡∏∞ JavaScript](#‡∏£‡∏∞‡∏ö‡∏ö-spa-‡πÅ‡∏•‡∏∞-javascript)
- [‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Template ‡πÅ‡∏•‡∏∞ UI/UX](#‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á-template-‡πÅ‡∏•‡∏∞-uiux)
- [Google Classroom Integration](#google-classroom-integration)
- [CSS ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á UI](#css-‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á-ui)
- [‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô](#‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)
- [License](#license)

---

## Project Overview (English)
- [Project Overview](#project-overview)
- [Tech Stack](#tech-stack)
- [Detailed Project Structure](#detailed-project-structure)
- [Database Models & Backend Code](#database-models--backend-code)
- [SPA System & JavaScript](#spa-system--javascript)
- [Template Structure & UI/UX](#template-structure--uiux)
- [Google Classroom Integration](#google-classroom-integration-1)
- [CSS & UI Customization](#css--ui-customization)
- [How to Run](#how-to-run)
- [License](#license-1)

---

# üáπüá≠ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

**Smart Learning Hub** ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô LMS ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå Google Classroom ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Class/Lesson) ‡πÅ‡∏•‡∏∞‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏¢‡πà‡∏≠‡∏¢ (Section/Content) ‡πÅ‡∏ö‡∏ö SPA (Single Page Application) ‡∏ó‡∏µ‡πà‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏´‡∏• UI/UX ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° Responsive ‡∏î‡πâ‡∏ß‡∏¢ Bootstrap 5 ‡πÅ‡∏•‡∏∞

**‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô:**
- SPA: ‡∏ó‡∏∏‡∏Å action (add/edit/delete/view) ‡∏ó‡∏≥‡∏ú‡πà‡∏≤‡∏ô AJAX/Fetch API, ‡πÑ‡∏°‡πà‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤
- Sidebar Navigation ‡πÅ‡∏ö‡∏ö Google Classroom
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô/‡∏™‡∏°‡∏±‡∏Ñ‡∏£/‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå/‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (local)
- CRUD ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Class/Lesson) ‡πÅ‡∏•‡∏∞‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ (Section) ‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (Text, File, Assignment, Note)
- ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå (‡∏´‡∏•‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå), ‡πÅ‡∏™‡∏î‡∏á preview ‡∏£‡∏π‡∏õ/ PDF ‡πÉ‡∏ô card
- ‡∏ü‡∏¥‡∏•‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå (‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó, ‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô, ‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î)
- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Google Classroom API

---

## ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ (Tech Stack)
- **Backend:** Python 3, Flask, Flask-SQLAlchemy, SQLite
- **Frontend:** Bootstrap 5, Tailwind CSS, Vanilla JS (Fetch API), SPA logic
- **3rd-party:** Google Classroom API, Google Drive API
- **Dev Tools:** npm, PostCSS

---

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÇ‡∏î‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î

- `/` (Root):
    - `run.py`, `start_flask.sh`, `requirements.txt`, `package.json`, `LICENSE`, `README.md`
- `app/` (Flask App):
    - `__init__.py`: ‡∏Å‡∏≥‡∏´‡∏ô‡∏î config, ‡∏™‡∏£‡πâ‡∏≤‡∏á Flask app, SQLAlchemy, import models, load routes
    - `routes.py`: ‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å route (SPA partial, auth, CRUD, Google Classroom, integration)
    - `core/`: Business logic (user, lesson, section, Google API, ...)
        - `user.py`, `user_manager.py`, `authenticator.py`: User model, CRUD, Auth
        - `lesson.py`, `lesson_manager.py`: Lesson, LessonSection model, CRUD, import Google Classroom
        - `imported_data.py`: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà import ‡∏à‡∏≤‡∏Å Google Classroom/MS Teams
        - `google_credentials.py`: ‡πÄ‡∏Å‡πá‡∏ö OAuth token Google
        - `course_linkage.py`, `course_linkage_manager.py`: Mapping ‡∏ß‡∏¥‡∏ä‡∏≤ KMITL ‡∏Å‡∏±‡∏ö Google Classroom
    - `static/`: CSS, JS, uploads
        - `js/main.js`: SPA logic, form handler, modal, filter, partial loader
        - `css/custom.css`, `css/tailwind.css`: ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á UI, ‡∏™‡∏µ, Responsive
        - `uploads/`: ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏î‡∏¢‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
    - `templates/`: HTML (Jinja2) templates (base, lessons, auth, ...)
        - `base.html`: Layout ‡∏´‡∏•‡∏±‡∏Å, sidebar, SPA loader
        - `class_fragment.html`, `dashboard_fragment.html`, ...: SPA partials
        - `lessons/`: ‡∏ü‡∏≠‡∏£‡πå‡∏°/‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î/section CRUD
        - `google_classroom/`, `integrations/`, `external_data/`: Integration templates

---

## ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡πâ‡∏î Backend

### User (app/core/user.py)
- `id`, `username`, `email`, `password_hash`
- Method: `set_password`, `check_password`

### UserManager (app/core/user_manager.py)
- CRUD user, ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ã‡πâ‡∏≥, ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï username/email/password

### Authenticator (app/core/authenticator.py)
- `login(username, password)`: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
- `register(username, email, password)`: ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà

### Lesson (app/core/lesson.py)
- `id`, `title`, `description`, `status`, `tags`, `user_id`, ...
- Google Classroom fields: `google_classroom_id`, `source_platform`, `announcements_data`, `topics_data`, `roster_data`, `attachments_data`
- Relationship: `sections` (LessonSection)

### LessonSection (app/core/lesson.py)
- `id`, `lesson_id`, `title`, `content`, `type`, `file_urls` (JSON), `assignment_due`, ...
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: text, file, assignment, note

### LessonManager (app/core/lesson_manager.py)
- CRUD Lesson/Section, import Google Classroom, update fields, multi-file upload
- Method: `add_lesson`, `get_lesson_by_id`, `get_lessons_by_user`, `update_lesson`, `delete_lesson`, `add_section`, `get_sections`, `get_section_by_id`, `update_section`, `delete_section`

### ImportedData (app/core/imported_data.py)
- ‡πÄ‡∏Å‡πá‡∏ö JSON data ‡∏ó‡∏µ‡πà import ‡∏à‡∏≤‡∏Å Google Classroom/MS Teams

### GoogleCredentials (app/core/google_credentials.py)
- ‡πÄ‡∏Å‡πá‡∏ö OAuth token, refresh_token, client_id, client_secret, scopes

### CourseLinkage (app/core/course_linkage.py)
- Mapping ‡∏ß‡∏¥‡∏ä‡∏≤ KMITL ‡∏Å‡∏±‡∏ö Google Classroom

### CourseLinkageManager (app/core/course_linkage_manager.py)
- CRUD linkage, ‡∏•‡∏ö/‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï mapping

### routes.py (app/routes.py)
- SPA partial routes: `/partial/class`, `/partial/class/<lesson_id>`, `/partial/class/<lesson_id>/sections`, ...
- Auth: `/partial/login`, `/partial/register`, `/partial/profile`, `/partial/change_password`, `/logout`
- Google Classroom: `/google_classroom/authorize`, `/google_classroom/oauth2callback`, `/google_classroom/fetch_data`, ...
- Integration: `/integrations/kmitl_classroom_link`, ...
- Jinja2 filter: `@app.template_filter('loads')` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö parse JSON ‡πÉ‡∏ô template

---

## ‡∏£‡∏∞‡∏ö‡∏ö SPA ‡πÅ‡∏•‡∏∞ JavaScript

### main.js (app/static/js/main.js)
- `loadPage(page)`: ‡πÇ‡∏´‡∏•‡∏î partial fragment ‡∏î‡πâ‡∏ß‡∏¢ fetch, inject HTML, re-bind event
- `updateSidebarAuth()`: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï sidebar auth section ‡∏´‡∏•‡∏±‡∏á login/logout
- `setupAuthForms()`: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ü‡∏≠‡∏£‡πå‡∏° login/register/change password (AJAX)
- `setupLessonForms()`, `setupLessonEditForm()`: ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç lesson (AJAX)
- `setupSectionForms()`: Modal + ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏° section, toggle field ‡∏ï‡∏≤‡∏° type, multi-file upload, client-side validation
- `setupSectionFilter()`: ‡∏ü‡∏¥‡∏•‡πÄ‡∏ï‡∏≠‡∏£‡πå section ‡∏ï‡∏≤‡∏° type, keyword, due date (real-time)
- `window.editSection`, `window.deleteSection`: SPA CRUD section (inline edit, AJAX delete)
- SPA navigation: ‡∏ó‡∏∏‡∏Å action ‡πÑ‡∏°‡πà reload ‡∏´‡∏ô‡πâ‡∏≤, ‡πÉ‡∏ä‡πâ JSON response/HTML fragment

---

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Template ‡πÅ‡∏•‡∏∞ UI/UX

### base.html
- Layout ‡∏´‡∏•‡∏±‡∏Å, sidebar ‡∏ã‡πâ‡∏≤‡∏¢‡∏°‡∏∑‡∏≠, responsive, SPA loader, dynamic sidebar-auth

### class_fragment.html
- Card-based lesson list, ‡∏õ‡∏∏‡πà‡∏° + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤, responsive grid

### lessons/_detail.html
- Tabs: Overview, Content, Google Classroom
- Content tab: Add Content (Modal), section list (card), filter UI
- Google Classroom tab: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà import (announcements, topics, roster, attachments)

### lessons/section_list.html
- Card-based section list, icon/type, in-card preview (image, PDF, download), Edit/Delete (SPA)

### lessons/section_add.html, section_edit.html
- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç section (fragment, inject ‡∏î‡πâ‡∏ß‡∏¢ JS)

### sidebar_auth_fragment.html
- SPA partial ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö auth section ‡πÉ‡∏ô sidebar (login/register/logout/profile)

---

## Google Classroom Integration
- OAuth2 flow (`google_classroom/authorize`, `oauth2callback`)
- ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• course, assignment, material, roster, attachment ‡∏à‡∏≤‡∏Å Google Classroom API
- Import ‡πÄ‡∏õ‡πá‡∏ô Lesson/Section, mapping ‡∏Å‡∏±‡∏ö user
- ‡πÄ‡∏Å‡πá‡∏ö token ‡πÉ‡∏ô GoogleCredentials, ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô ImportedData
- UI: Google Classroom tab ‡πÉ‡∏ô lesson, ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö card/tab/accordion

---

## CSS ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á UI
- Bootstrap 5: ‡πÉ‡∏ä‡πâ‡∏ó‡∏∏‡∏Å component ‡∏´‡∏•‡∏±‡∏Å (card, modal, tab, form, grid)

---

## ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
1. **Clone repo:**
   ```bash
   git clone ...
   cd PyProject-3
   ```
2. **‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Python dependencies:**
   ```bash
   pip install -r requirements.txt
   ```
3. **‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Frontend dependencies (optional):**
   ```bash
   npm install
   npm run tailwind:watch # ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ Tailwind
   ```
4. **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ env:**
   - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env` ‡∏´‡∏£‡∏∑‡∏≠ export ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ env (‡∏î‡∏π‡πÉ‡∏ô `app/__init__.py`)
5. **‡∏£‡∏±‡∏ô‡πÅ‡∏≠‡∏õ:**
   ```bash
   python run.py
   # ‡∏´‡∏£‡∏∑‡∏≠
   ./start_flask.sh
   ```
6. **‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
   - ‡πÄ‡∏õ‡∏¥‡∏î browser ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `http://localhost:5000`

---

## License
MIT License

---

# üá¨üáß Project Overview

**Smart Learning Hub** is a modern, Google Classroom-inspired LMS web application. It features a beautiful, responsive UI, SPA navigation, robust local authentication, dynamic lesson/class and section/content management, file uploads with preview, real-time filtering, and seamless Google Classroom API integration.

---

## Tech Stack
- **Backend:** Python 3, Flask, Flask-SQLAlchemy, SQLite
- **Frontend:** Bootstrap 5, Tailwind CSS, Vanilla JS (Fetch API), SPA logic
- **3rd-party:** Google Classroom API, Google Drive API
- **Dev Tools:** npm, PostCSS

---

## Detailed Project Structure

- `/` (Root):
    - `run.py`, `start_flask.sh`, `requirements.txt`, `package.json`, `LICENSE`, `README.md`
- `app/` (Flask App):
    - `__init__.py`: App config, Flask/SQLAlchemy setup, model import, route loading
    - `routes.py`: All routes (SPA partials, auth, CRUD, Google Classroom, integration)
    - `core/`: Business logic (user, lesson, section, Google API, ...)
        - `user.py`, `user_manager.py`, `authenticator.py`: User model, CRUD, Auth
        - `lesson.py`, `lesson_manager.py`: Lesson, LessonSection model, CRUD, Google Classroom import
        - `imported_data.py`: Stores imported Google Classroom/MS Teams data
        - `google_credentials.py`: Stores Google OAuth tokens
        - `course_linkage.py`, `course_linkage_manager.py`: KMITL <-> Google Classroom mapping
    - `static/`: CSS, JS, uploads
        - `js/main.js`: SPA logic, form handler, modal, filter, partial loader
        - `css/custom.css`, `css/tailwind.css`: UI customization, color, responsive
        - `uploads/`: User-uploaded files
    - `templates/`: HTML (Jinja2) templates (base, lessons, auth, ...)
        - `base.html`: Main layout, sidebar, SPA loader
        - `class_fragment.html`, `dashboard_fragment.html`, ...: SPA partials
        - `lessons/`: Forms/detail/section CRUD
        - `google_classroom/`, `integrations/`, `external_data/`: Integration templates

---

## Database Models & Backend Code

### User (app/core/user.py)
- `id`, `username`, `email`, `password_hash`
- Methods: `set_password`, `check_password`

### UserManager (app/core/user_manager.py)
- CRUD user, duplicate check, update username/email/password

### Authenticator (app/core/authenticator.py)
- `login(username, password)`: Password check
- `register(username, email, password)`: Register new user

### Lesson (app/core/lesson.py)
- `id`, `title`, `description`, `status`, `tags`, `user_id`, ...
- Google Classroom fields: `google_classroom_id`, `source_platform`, `announcements_data`, `topics_data`, `roster_data`, `attachments_data`
- Relationship: `sections` (LessonSection)

### LessonSection (app/core/lesson.py)
- `id`, `lesson_id`, `title`, `content`, `type`, `file_urls` (JSON), `assignment_due`, ...
- Supports: text, file, assignment, note

### LessonManager (app/core/lesson_manager.py)
- CRUD Lesson/Section, import Google Classroom, update fields, multi-file upload
- Methods: `add_lesson`, `get_lesson_by_id`, `get_lessons_by_user`, `update_lesson`, `delete_lesson`, `add_section`, `get_sections`, `get_section_by_id`, `update_section`, `delete_section`

### ImportedData (app/core/imported_data.py)
- Stores imported JSON data from Google Classroom/MS Teams

### GoogleCredentials (app/core/google_credentials.py)
- Stores OAuth token, refresh_token, client_id, client_secret, scopes

### CourseLinkage (app/core/course_linkage.py)
- Mapping KMITL course to Google Classroom

### CourseLinkageManager (app/core/course_linkage_manager.py)
- CRUD linkage, add/update/delete mapping

### routes.py (app/routes.py)
- SPA partial routes: `/partial/class`, `/partial/class/<lesson_id>`, `/partial/class/<lesson_id>/sections`, ...
- Auth: `/partial/login`, `/partial/register`, `/partial/profile`, `/partial/change_password`, `/logout`
- Google Classroom: `/google_classroom/authorize`, `/google_classroom/oauth2callback`, `/google_classroom/fetch_data`, ...
- Integration: `/integrations/kmitl_classroom_link`, ...
- Jinja2 filter: `@app.template_filter('loads')` for JSON parsing in templates

---

## SPA System & JavaScript

### main.js (app/static/js/main.js)
- `loadPage(page)`: Loads partial fragment via fetch, injects HTML, re-binds events
- `updateSidebarAuth()`: Updates sidebar auth section after login/logout
- `setupAuthForms()`: Handles login/register/change password forms (AJAX)
- `setupLessonForms()`, `setupLessonEditForm()`: Add/edit lesson forms (AJAX)
- `setupSectionForms()`: Modal + add section form, dynamic field toggle, multi-file upload, client-side validation
- `setupSectionFilter()`: Filter section by type, keyword, due date (real-time)
- `window.editSection`, `window.deleteSection`: SPA CRUD section (inline edit, AJAX delete)
- SPA navigation: All actions without page reload, using JSON response/HTML fragment

---

## Template Structure & UI/UX

### base.html
- Main layout, left sidebar, responsive, SPA loader, dynamic sidebar-auth

### class_fragment.html
- Card-based lesson list, + add lesson button, responsive grid

### lessons/_detail.html
- Tabs: Overview, Content, Google Classroom
- Content tab: Add Content (Modal), section list (card), filter UI
- Google Classroom tab: Shows imported data (announcements, topics, roster, attachments)

### lessons/section_list.html
- Card-based section list, icon/type, in-card preview (image, PDF, download), Edit/Delete (SPA)

### lessons/section_add.html, section_edit.html
- Add/edit section forms (fragment, injected by JS)

### sidebar_auth_fragment.html
- SPA partial for sidebar auth section (login/register/logout/profile)

---

## Google Classroom Integration
- OAuth2 flow (`google_classroom/authorize`, `oauth2callback`)
- Fetches course, assignment, material, roster, attachment from Google Classroom API
- Import as Lesson/Section, mapping to user
- Stores token in GoogleCredentials, data in ImportedData
- UI: Google Classroom tab in lesson, data shown as card/tab/accordion

---

## CSS & UI Customization
- `custom.css`: Main color (blue), sidebar, card, button, responsive
- `tailwind.css`: Utility classes for layout, spacing, responsive (optional)
- Bootstrap 5: Used for all main components (card, modal, tab, form, grid)

---

## How to Run
1. **Clone repo:**
   ```bash
   git clone ...
   cd PyProject-3
   ```
2. **Install Python dependencies:**
   ```bash
   pip install -r requirements.txt
   ```
3. **Install Frontend dependencies (optional):**
   ```bash
   npm install
   npm run tailwind:watch # if using Tailwind
   ```
4. **Set up env:**
   - Create `.env` or export env variables (see `app/__init__.py`)
5. **Run app:**
   ```bash
   python run.py
   # or
   ./start_flask.sh
   ```
6. **Access:**
   - Open browser at `http://localhost:5000`

---

## License
MIT License 