{% if user %}
  <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle w-100" type="button" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-person-circle me-2"></i>{{ user.username }}
    </button>
    <ul class="dropdown-menu" aria-labelledby="profileDropdown">
      <li><a class="dropdown-item" href="#" onclick="loadPage('profile');return false;"><i class="bi bi-person-circle me-2"></i>Profile</a></li>
      <li><a class="dropdown-item" href="#" onclick="loadPage('change_password');return false;"><i class="bi bi-key-fill me-2"></i>Change Password</a></li>
      <li><hr class="dropdown-divider"></li>
      <li><a class="dropdown-item text-danger" href="{{ url_for('auth.logout') }}"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
    </ul>
  </div>
{% else %}
  <div class="d-grid gap-2">
    <a href="{{ url_for('auth.login') }}" class="btn btn-primary">Login</a>
    <a href="{{ url_for('auth.register') }}" class="btn btn-outline-primary">Register</a>
    <!-- Google Sign-In button -->
    <a href="{{ url_for('google_auth.login') }}" class="btn btn-google" id="google-signin-sidebar">
      <img src="{{ url_for('static', filename='icons/google-logo.svg') }}" alt="Google">
      <span class="label-small">เข้าสู่ระบบด้วย Google</span>
      <span class="spinner" aria-hidden="true"></span>
      <!-- JS will add 'loading' class on click -->
    </a>
  </div>
{% endif %}
