{% if user %}
  <!-- Logged In User -->
  <div class="enchat-sidebar__user dropdown">
    <button class="enchat-sidebar__user-btn dropdown-toggle" type="button" id="enchantProfileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
      <div class="enchat-sidebar__user-avatar">
        <i class="bi bi-person-circle"></i>
      </div>
      <div class="enchat-sidebar__user-info">
        <span class="enchat-sidebar__user-name">{{ user.username }}</span>
        <span class="enchat-sidebar__user-role">{{ user.role|default('Student') }}</span>
      </div>
      <i class="enchat-sidebar__user-dropdown-icon bi bi-chevron-down"></i>
    </button>
    <ul class="dropdown-menu enchat-sidebar__dropdown-menu" aria-labelledby="enchantProfileDropdown">
      <li>
        <a class="dropdown-item enchat-sidebar__dropdown-item" href="#" onclick="loadPage('profile');return false;">
          <i class="bi bi-person-circle"></i>
          <span>Profile</span>
        </a>
      </li>
      <li>
        <a class="dropdown-item enchat-sidebar__dropdown-item" href="#" onclick="loadPage('change_password');return false;">
          <i class="bi bi-key-fill"></i>
          <span>Change Password</span>
        </a>
      </li>
      <li><hr class="enchat-sidebar__dropdown-divider"></li>
      <li>
        <a class="dropdown-item enchat-sidebar__dropdown-item enchat-sidebar__dropdown-item--danger" href="{{ url_for('auth.logout') }}">
          <i class="bi bi-box-arrow-right"></i>
          <span>Logout</span>
        </a>
      </li>
    </ul>
  </div>
{% else %}
    <div class="d-grid gap-2">
      <a href="{{ url_for('auth.login') }}" class="btn btn-primary">Login</a>
      <a href="{{ url_for('auth.register') }}" class="btn btn-outline-primary">Register</a>
    </div>
{% endif %}
