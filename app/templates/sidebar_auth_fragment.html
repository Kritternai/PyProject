{% if user %}
  <!-- Logged In User -->
  <div class="enchat-sidebar__user dropdown">
    <button class="enchat-sidebar__user-btn dropdown-toggle" type="button" id="enchantProfileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
      <div class="enchat-sidebar__user-avatar">
        <i class="bi bi-person-circle"></i>
      </div>
      <div class="enchat-sidebar__user-info">
        <span class="enchat-sidebar__user-name">{{ user.username }}</span>
        <span class="enchat-sidebar__user-role">{{ user.role|default('Student') }}</span>
      </div>
      <i class="enchat-sidebar__user-dropdown-icon bi bi-chevron-down"></i>
    </button>
    <ul class="dropdown-menu enchat-sidebar__dropdown-menu" aria-labelledby="enchantProfileDropdown">
      <li>
        <a class="dropdown-item enchat-sidebar__dropdown-item" href="#" onclick="loadPage('profile');return false;">
          <i class="bi bi-person-circle"></i>
          <span>Profile</span>
        </a>
      </li>
      <li>
        <a class="dropdown-item enchat-sidebar__dropdown-item" href="#" onclick="loadPage('change_password');return false;">
          <i class="bi bi-key-fill"></i>
          <span>Change Password</span>
        </a>
      </li>
      <li><hr class="enchat-sidebar__dropdown-divider"></li>
      <li>
        <a class="dropdown-item enchat-sidebar__dropdown-item enchat-sidebar__dropdown-item--danger" href="{{ url_for('auth.logout') }}">
          <i class="bi bi-box-arrow-right"></i>
          <span>Logout</span>
        </a>
      </li>
    </ul>
  </div>
{% else %}
    <div class="enchat-sidebar__auth-buttons">
      <a href="{{ url_for('auth.login') }}" class="enchat-sidebar__auth-btn enchat-sidebar__auth-btn--login">
        <i class="bi bi-box-arrow-in-right"></i>
        <span>Login</span>
      </a>
      <a href="{{ url_for('auth.register') }}" class="enchat-sidebar__auth-btn enchat-sidebar__auth-btn--register">
        <i class="bi bi-person-plus-fill"></i>
        <span>Register</span>
      </a>
    </div>
{% endif %}
