{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
    <h3>Edit Note</h3>
    <form method="POST" enctype="multipart/form-data" id="edit-note-form">
        <!-- Title -->
        <div class="mb-3">
            <label for="title" class="form-label">Title</label>
            <input type="text" class="form-control" id="title" name="title" value="{{ note.title }}" required>
        </div>

        <!-- Body -->
        <div class="mb-3">
            <label for="body" class="form-label">Body</label>
            <textarea class="form-control" id="body" name="body" rows="5" required>{{ note.body }}</textarea>
        </div>

        <!-- Tags -->
        <div class="mb-3">
            <label for="tags" class="form-label">Tags (comma-separated)</label>
            <input type="text" class="form-control" id="tags" name="tags" value="{{ note.tags }}">
        </div>

        <!-- Status -->
        <div class="mb-3">
            <label for="status" class="form-label">Status</label>
            <select class="form-select" id="status" name="status">
                <option value="">Select status</option>
                <option value="active" {% if note.status == 'active' %}selected{% endif %}>Active</option>
                <option value="archived" {% if note.status == 'archived' %}selected{% endif %}>Archived</option>
            </select>
        </div>

        <!-- External Link -->
        <div class="mb-3">
            <label for="external_link" class="form-label">External Link</label>
            <input type="url" class="form-control" id="external_link" name="external_link" value="{{ note.external_link }}">
        </div>

        <!-- Image Preview -->
        {% if note.image_path %}
        <div class="mb-3">
            <label class="form-label">Current Image:</label><br>
            <img src="{{ url_for('static', filename=note.image_path.split('static/')[-1]) }}" alt="Current Image" class="img-thumbnail" style="max-height: 200px;">
        </div>
        {% endif %}

        <!-- Upload Image -->
        <div class="mb-3">
            <label for="image" class="form-label">Replace Image</label>
            <input class="form-control" type="file" name="image" id="image" accept="image/*">
        </div>

        <!-- File Preview -->
        {% if note.file_url %}
        <div class="mb-3">
            <label class="form-label">Current File:</label><br>
            <a href="{{ url_for('static', filename=note.file_url.split('static/')[-1]) }}" target="_blank" class="btn btn-sm btn-outline-primary">View File</a>
        </div>
        {% endif %}

        <!-- Upload File -->
        <div class="mb-3">
            <label for="file" class="form-label">Replace File</label>
            <input class="form-control" type="file" name="file" id="file" accept=".pdf,.doc,.docx,.txt,.xlsx,.xls,.ppt,.pptx">
        </div>

        <!-- Submit -->
        <button type="submit" class="btn btn-primary">Save Changes</button>
        <a href="#" class="btn btn-secondary" onclick="window.history.back()">Cancel</a>
    </form>
</div>
{% endblock %}
